---
title: Astro-Starlight 简要配置
---

## 快速入门

以下是 Starlight 的几个核心功能配置入口，可直接点击链接查看官方文档：

* [自定义样式](https://starlight.astro.build/zh-cn/guides/css-and-tailwind/)
* [编辑按钮设置](https://starlight.astro.build/zh-cn/guides/customization/#%E7%BC%96%E8%BE%91%E9%93%BE%E6%8E%A5)
* [本地化](https://starlight.astro.build/guides/i18n/#use-a-root-locale)
* [Starlight Image Zoom](https://starlight-image-zoom.vercel.app/getting-started/)

## 代码块优化

### 显示行号与样式定制

Starlight 使用 Expressive Code 作为代码块渲染引擎，支持自定义行号、主题等功能。

首先安装行号插件：

```bash
pnpm add @expressive-code/plugin-line-numbers
```

创建 `ec.config.mjs` 配置文件，用于定制代码块样式：

```mjs title="./ec.config.mjs"
import { latte, frappe, macchiato, mocha } from '@catppuccin/vscode'
import { pluginCollapsibleSections } from '@expressive-code/plugin-collapsible-sections'
import { pluginLineNumbers } from '@expressive-code/plugin-line-numbers'
import { defineEcConfig } from 'astro-expressive-code'

export default defineEcConfig({
  // 启用行号和折叠功能
  plugins: [
    pluginLineNumbers(),
    pluginCollapsibleSections()
  ],

  // 主题配置：先亮色后暗色（顺序固定）
  themes: [latte, mocha], // 推荐组合：latte(亮) + mocha(暗)
  // 其他暗色主题可选：
  // themes: [latte, frappe],
  // themes: [latte, macchiato],

  // 确保主题与 Starlight 主题同步
  themeCssSelector: (theme) => 
    theme.type === 'dark' ? '[data-theme="dark"]' : '[data-theme="light"]',

  // 样式微调
  styleOverrides: {
    borderRadius: '0.5rem',
    codeFontSize: '0.95rem',
    // 可添加更多自定义样式
  },
})
```

## 侧边栏导航配置示例

在 `astro.config.mjs` 中配置侧边栏结构：

```js title="./astro.config.mjs" showLineNumbers ins={3,5-6}
sidebar: [
  {
    label: 'Astro-Starlight',
    items: [
      // 每个条目对应导航菜单中的一项
      { label: 'Astro-Starlight 简要配置', slug: 'astro-starlight/example' },
    ],
  },
  {
    label: 'Reference',
    autogenerate: { directory: 'reference' },
  },
],
```

## Frontmatter 配置详解

Starlight 支持在 Markdown/MDX 文件的 frontmatter 中配置丰富的页面选项，相比普通 Astro 博客，Starlight 的 `description` 字段是可选的。

### 侧边栏设置（`sidebar`）

控制页面在侧边栏中的显示方式：数值越小，页面在侧边栏中显示越靠前：

```yaml
---
sidebar:
  order: 1
---
```

为侧边栏条目添加徽章：

```yaml
---
sidebar:
  badge:
    text: "Demo"      # 徽章文本
    variant: "note"   # 徽章样式
---
```

**徽章样式选项（`variant`）：**
* `tip` - 紫色
* `note` - 蓝色
* `danger` - 红色
* `caution` - 橙色
* `success` - 绿色
* `default` - 主题强调色

### 英雄区块（`hero`）

用于首页或重要页面的引人注目的头部区域：

```yaml
---
hero:
  tagline: "欢迎使用 Starlight"
  image:
    file: ../../assets/avatar.png
  actions:
    - text: "开始使用"
      link: /docs/getting-started
      icon: right-arrow
      variant: primary
    - text: "查看文档"
      link: /docs/guide
      icon: external
      variant: minimal
---
```

**按钮配置参数：**
* `text` - 按钮显示文本
* `link` - 目标链接地址
* `icon` - 图标名称（如 `right-arrow`、`external`）
* `variant` - 按钮样式（`primary`/`secondary`/`minimal`）

### 目录控制（`tableOfContents`）

自定义页面右侧目录的显示方式：

```yaml
---
# 禁用目录
# tableOfContents: false

# 限制目录标题级别
# 默认值：min=2 (H2), max=3 (H3)
tableOfContents:
  minHeadingLevel: 2  # 最小显示 H2
  maxHeadingLevel: 4  # 最大显示 H4
---
```

### 自定义 Head 标签（`head`）

向页面 `<head>` 添加自定义标签：

```yaml
---
# 自定义页面元数据
head:
  - tag: meta
    attrs:
      name: keywords
      content: "Starlight, MDX, 组件"
---
```

### 完整配置示例

以下是一个包含多种配置的完整示例：

```yaml
---
title: "基于 Starlight 的写作扩展"
description: "Starlight 组件使用指南和配置说明"
slug: writing-standards/starlight-writing-extensions
sidebar:
  order: 1
  badge:
    text: "Demo"
    variant: "note"
tableOfContents:
  minHeadingLevel: 2
  maxHeadingLevel: 4
editUrl: false
head:
  - tag: meta
    attrs:
      name: keywords
      content: "Starlight, MDX, 组件"
---
```

## 静态图片资源管理

在 Astro Starlight 中管理图片资源有两种主要方式，各有优缺点。

### 1. 使用 `src/assets/` 目录（推荐）

将图片放在 `src/assets/` 目录下，使用相对路径引用，可享受 Astro 的自动优化。

**引用方式：**

在 Hero 区块中引用（frontmatter）：
```yaml
---
hero:
  image:
    file: ../../assets/avatar.png
---
```


### 2. 使用 `public/` 目录（简单直接）

将图片放在 `public/` 目录下，使用根路径引用，适合大量静态资源。

**目录结构：**
```
public/
├── images/
│   ├── logo.png
│   └── screenshot.jpg
└── favicon.svg
```

**引用方式：**

需要注意 `astro.config.mjs` 中的 `base` 配置：

如果设置了 `base: 'docs'`：
```mdx
![图片描述](/docs/images/logo.png)
```

如果没有设置 `base`：
```mdx
![图片描述](/images/logo.png)
```

在 Hero 区块中引用（frontmatter）：
```yaml
---
hero:
  image:
    file: /images/logo.png
---
```

### 3. 相对路径 vs 绝对路径

**相对路径**（从 `src/assets/` 引用）：
- ✅ Astro 自动优化（压缩、格式转换）
- ✅ 支持 TypeScript 类型检查
- ✅ 构建时验证文件存在性
- ❌ 需要计算正确的相对路径

**绝对路径**（从 `public/` 引用）：
- ✅ 路径简单直观
- ✅ 适合大量静态资源
- ❌ 不支持自动优化
- ❌ 需要手动处理 `base` 路径


```
<!-- 如果配置了 base: 'docs' -->
![Logo](/docs/images/logo.png)

<!-- 如果没有配置 base -->
![Logo](/images/logo.png)
```

**图片管理建议**

1. 少量图片：优先使用 `src/assets/`，享受 Astro 优化
2. 大量静态资源：使用 `public/`，简化路径管理
3. Hero 图片：优先使用 `src/assets/`，确保优化显示
4. base 路径：配置 `base` 后，所有 `public/` 资源引用需添加前缀

## Slug/url 管理

除了内容层级的命名约定，良好的文档实践还包括对URL标识（slug）的规范使用。Slug是文档在网络环境中的唯一标识，直接影响文档的可访问性和SEO表现。

### 1. 使用有意义的 slug

Slug应准确反映文档内容，避免使用无意义的字符或临时名称：

```yaml
# ✅ 推荐
slug: getting-started  # 清晰表达文档用途
slug: api-reference    # 明确指示文档类型
slug: advanced-topics  # 概括内容范围

# ❌ 不推荐
slug: page1           # 无意义的编号
slug: doc-2024-01-01  # 仅包含日期，缺乏内容指示
slug: temp            # 临时名称，不适合长期使用
```

### 2. 保持 slug 简洁

简洁的slug便于记忆和传播，避免使用过长的描述性短语：

```yaml
# ✅ 推荐
slug: quick-start  # 简洁明了

# ❌ 不推荐
slug: how-to-get-started-with-our-amazing-product-in-5-minutes  # 过于冗长
```

### 3. 使用一致的命名风格

选择并坚持一种命名风格，确保整个文档系统的一致性：

```yaml
# ✅ 推荐：使用连字符（应用广泛，兼容性好）
slug: api-reference
slug: user-guide

# 或者使用下划线（保持内部一致即可）
slug: api_reference
slug: user_guide
```

### 4. 在配置文件中优先使用 slug

在文档系统的配置文件（如 `meta.json`）中，优先使用slug引用页面，提高配置的可读性和可维护性：

```json
{
  "pages": [
    "index",
    "getting-started",  // ✅ 使用有意义的slug
    "api-reference"     // ✅ 使用有意义的slug
  ]
}
```
